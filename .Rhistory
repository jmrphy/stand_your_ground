setwd("~/Dropbox/gh_projects/florida_syg")
options(digits=2)
df<-read.csv("cleaned_data/convict_model_data.csv", stringsAsFactors=TRUE)
df$conviction<-factor(df$conviction, levels=c("No Conviction", "Conviction"))
df$victim_unarmed<-factor(df$victim_unarmed, levels=c("Victim not clearly unarmed", "Victim clearly unarmed"))
df$victim_crime<-factor(df$victim_crime, levels=c("Victim was not clearly committing a crime", "Victim was committing a crime"))
df$could_retreat<-factor(df$could_retreat, levels=c("Defendant could not clearly have retreated", "Defendant could have retreated"))
df$accused_weapon<-factor(df$accused_weapon, levels=c("Defendant did not clearly have a gun", "Defendant clearly had a gun"))
df$witness<-factor(df$witness, levels=c("No clear witness(es)", "Clear witness(es)"))
df$type<-factor(df$type, levels=c("Non-domestic", "Domestic"))
library(reporttools)
summaryvars<-subset(df, select=c("victim_initiated", "victim_crime", "victim_unarmed", "defendant_pursued",
"could_retreat", "accused_weapon", "deaths", "witness",
"physical_evidence", "defendant_property", "type", "victim_race",
"victim_gender", "victim_age", "accused_race", "accused_gender",
"accused_age", "year"))
summaryvars$deaths<-as.factor(summaryvars$deaths)
levels(summaryvars$deaths)<-c("Victim was not killed", "Victim was killed")
tableContinuous(summaryvars[,sapply(summaryvars, is.numeric)],
stats = c("n", "min", "median", "mean", "max", "s", "na"),
cap="Summary statistics for numerical variables",
lab="Summary statistics for numerical variables")
tableNominal(summaryvars[,!sapply(summaryvars, is.numeric)],
stats = c("n", "min", "median", "mean", "max", "s", "na"),
cap="Summary statistics for categorical variables",
lab="Summary statistics for categorical variables",
caption.placement = "top",
add.to.row = list(list(42),
"\\hline  \\multicolumn{5}{l}{\\textbf{Note: }
The variable county was omitted.} \\\\"))
qplot(summaryvars$victim_initiated)
require(ggplot2)
qplot(summaryvars$victim_initiated)
p2<-qplot(summaryvars$victim_crime)
p1<-qplot(summaryvars$victim_initiated)
require(gridExtra)
p1<-qplot(summaryvars$victim_initiated)
p2<-qplot(summaryvars$victim_crime)
gridExtra::grid.arrange(p1, p2)
for i in summaryvars{
qplot(i)
}
for (i in summaryvars){
qplot(i)
}
for (i in 1:length(summaryvars)){
qplot(i)
}
sapply(summaryvars, function(x) qplot(x))
plots<-sapply(summaryvars, function(x) qplot(x))
gridExtra::grid.arrange(plots)
gridExtra::grid.arrange(plots)
do.call(grid.arrange, plots)
plots<-sapply(summaryvars, function(x) qplot(x))
do.call(grid.arrange, plots)
ll<-lapply(summaryvars, function(i) qplot(data=data.frame(y=summaryvars[, i]), length(summaryvars), y)
)
plots
plots<-apply(summaryvars, function(x) qplot(x))
plots<-sapply(summaryvars, function(x) qplot(x))
plots
model.weapon<-zelig(conviction ~ victim_initiated + victim_crime + victim_unarmed + defendant_pursued +
could_retreat + accused_weapon + deaths + witness +
physical_evidence + defendant_property + type + victim_race +
victim_gender + victim_age + accused_race + accused_gender +
accused_age + county + year + accused_weapon:deaths,
data=df,
model="logit",
cite=FALSE,
robust=TRUE)
require(Zelig)
model.weapon<-zelig(conviction ~ victim_initiated + victim_crime + victim_unarmed + defendant_pursued +
could_retreat + accused_weapon + deaths + witness +
physical_evidence + defendant_property + type + victim_race +
victim_gender + victim_age + accused_race + accused_gender +
accused_age + county + year + accused_weapon:deaths,
data=df,
model="logit",
cite=FALSE,
robust=TRUE)
summary(model.weapon)
stargazer(model1, header=FALSE, font.size="scriptsize", align=TRUE,
title="Logistic Regression for Dependent Variable Conviction",
dep.var.labels.include=FALSE,
style="ajps",
keep=c("victim_initiated", "victim_crime", "victim_unarmed", "defendant_pursued", "could_retreat",
"accused_weapon", "deaths", "witness",
"physical_evidence", "defendant_property", "type", "victim_race", "victim_gender",
"victim_age", "accused_race", "accused_gender", "accused_age", "accused_weapon:deaths"),
covariate.labels=c("Victim Initiated", "Victim Crime", "Victim Unarmed", "Defendant Pursued",
"Defendant Could Retreat", "Defendant Gun", "Deaths", "Witness", "Physical Evidence",
"Defendant's Property", "Domestic", "Victim White", "Victim Male", "Victim Age", "Defendant White",
"Defendant Male", "Defendant Age", "Defendant Gun X Deaths"),
digits=2,
column.sep.width=c("0pt"),
notes=c("County and Year variables included in the models but not displayed. Robust (Huber-White) standard errors in parentheses.")
)
require(stargazer)
stargazer(model1, header=FALSE, font.size="scriptsize", align=TRUE,
title="Logistic Regression for Dependent Variable Conviction",
dep.var.labels.include=FALSE,
style="ajps",
keep=c("victim_initiated", "victim_crime", "victim_unarmed", "defendant_pursued", "could_retreat",
"accused_weapon", "deaths", "witness",
"physical_evidence", "defendant_property", "type", "victim_race", "victim_gender",
"victim_age", "accused_race", "accused_gender", "accused_age", "accused_weapon:deaths"),
covariate.labels=c("Victim Initiated", "Victim Crime", "Victim Unarmed", "Defendant Pursued",
"Defendant Could Retreat", "Defendant Gun", "Deaths", "Witness", "Physical Evidence",
"Defendant's Property", "Domestic", "Victim White", "Victim Male", "Victim Age", "Defendant White",
"Defendant Male", "Defendant Age", "Defendant Gun X Deaths"),
digits=2,
column.sep.width=c("0pt"),
notes=c("County and Year variables included in the models but not displayed. Robust (Huber-White) standard errors in parentheses.")
)
stargazer(model.weapon, header=FALSE, font.size="scriptsize", align=TRUE,
title="Logistic Regression for Dependent Variable Conviction",
dep.var.labels.include=FALSE,
style="ajps",
keep=c("victim_initiated", "victim_crime", "victim_unarmed", "defendant_pursued", "could_retreat",
"accused_weapon", "deaths", "witness",
"physical_evidence", "defendant_property", "type", "victim_race", "victim_gender",
"victim_age", "accused_race", "accused_gender", "accused_age", "accused_weapon:deaths"),
covariate.labels=c("Victim Initiated", "Victim Crime", "Victim Unarmed", "Defendant Pursued",
"Defendant Could Retreat", "Defendant Gun", "Deaths", "Witness", "Physical Evidence",
"Defendant's Property", "Domestic", "Victim White", "Victim Male", "Victim Age", "Defendant White",
"Defendant Male", "Defendant Age", "Defendant Gun X Deaths"),
digits=2,
column.sep.width=c("0pt"),
notes=c("County and Year variables included in the models but not displayed. Robust (Huber-White) standard errors in parentheses.")
)
stargazer(model.weapon, header=FALSE, font.size="scriptsize", align=TRUE,
title="Logistic Regression for Dependent Variable Conviction",
dep.var.labels.include=FALSE,
style="ajps",
keep=c("victim_initiated", "victim_crime", "victim_unarmed", "defendant_pursued", "could_retreat",
"accused_weapon", "deaths", "witness",
"physical_evidence", "defendant_property", "type", "victim_race", "victim_gender",
"victim_age", "accused_race", "accused_gender", "accused_age", "accused_weapon:deaths"),
covariate.labels=c("Victim Initiated", "Victim Crime", "Victim Unarmed", "Defendant Pursued",
"Defendant Could Retreat", "Defendant Gun", "Deaths", "Witness", "Physical Evidence",
"Defendant's Property", "Domestic", "Victim White", "Victim Male", "Victim Age", "Defendant White",
"Defendant Male", "Defendant Age", "Defendant Gun X Deaths"),
digits=2,
notes=c("County and Year variables included in the models but not displayed. Robust (Huber-White) standard errors in parentheses.")
)
?stargazer
stargazer(model.weapon, header=FALSE, font.size="scriptsize", align=TRUE,
title="Logistic Regression for Dependent Variable Conviction",
dep.var.labels.include=FALSE,
keep=c("victim_initiated", "victim_crime", "victim_unarmed", "defendant_pursued", "could_retreat",
"accused_weapon", "deaths", "witness",
"physical_evidence", "defendant_property", "type", "victim_race", "victim_gender",
"victim_age", "accused_race", "accused_gender", "accused_age", "accused_weapon:deaths"),
covariate.labels=c("Victim Initiated", "Victim Crime", "Victim Unarmed", "Defendant Pursued",
"Defendant Could Retreat", "Defendant Gun", "Deaths", "Witness", "Physical Evidence",
"Defendant's Property", "Domestic", "Victim White", "Victim Male", "Victim Age", "Defendant White",
"Defendant Male", "Defendant Age", "Defendant Gun X Deaths"),
digits=2,
notes=c("County and Year variables included in the models but not displayed. Robust (Huber-White) standard errors in parentheses.")
)
stargazer(model.weapon, header=FALSE, font.size="scriptsize",
title="Logistic Regression for Dependent Variable Conviction",
dep.var.labels.include=FALSE,
keep=c("victim_initiated", "victim_crime", "victim_unarmed", "defendant_pursued", "could_retreat",
"accused_weapon", "deaths", "witness",
"physical_evidence", "defendant_property", "type", "victim_race", "victim_gender",
"victim_age", "accused_race", "accused_gender", "accused_age", "accused_weapon:deaths"),
covariate.labels=c("Victim Initiated", "Victim Crime", "Victim Unarmed", "Defendant Pursued",
"Defendant Could Retreat", "Defendant Gun", "Deaths", "Witness", "Physical Evidence",
"Defendant's Property", "Domestic", "Victim White", "Victim Male", "Victim Age", "Defendant White",
"Defendant Male", "Defendant Age", "Defendant Gun X Deaths"),
digits=2,
notes=c("County and Year variables included in the models but not displayed. Robust (Huber-White) standard errors in parentheses.")
)
stargazer(model.weapon, header=FALSE, font.size="scriptsize",
title="Logistic Regression for Dependent Variable Conviction",
dep.var.labels.include=FALSE,
style="ajps",
keep=c("victim_initiated", "victim_crime", "victim_unarmed", "defendant_pursued", "could_retreat",
"accused_weapon", "deaths", "witness",
"physical_evidence", "defendant_property", "type", "victim_race", "victim_gender",
"victim_age", "accused_race", "accused_gender", "accused_age", "accused_weapon:deaths"),
covariate.labels=c("Victim Initiated", "Victim Crime", "Victim Unarmed", "Defendant Pursued",
"Defendant Could Retreat", "Defendant Gun", "Deaths", "Witness", "Physical Evidence",
"Defendant's Property", "Domestic", "Victim White", "Victim Male", "Victim Age", "Defendant White",
"Defendant Male", "Defendant Age", "Defendant Gun X Deaths"),
digits=2,
column.sep.width=c("0pt"),
notes=c("County and Year variables included in the models but not displayed. Robust (Huber-White) standard errors in parentheses.")
)
