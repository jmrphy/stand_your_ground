model1<-zelig(conviction ~ victim_initiated + victim_crime + victim_unarmed + defendant_pursued +
could_retreat + accused_weapon + deaths + witness +
physical_evidence + defendant_property + type + victim_race +
victim_gender + victim_age + accused_race + accused_gender +
accused_age + county + year,
data=df,
model="logit",
cite=FALSE,
robust=TRUE)
#model1classif<-table(model1$result$fitted.values>.5, model1$result$y)
#model1correct<-(model1classif[1,1] + model1classif[2,2])
# (model1correct/nrow(df))*100
# summary(model1)
model2<-zelig(conviction ~ victim_initiated + victim_crime + victim_unarmed + defendant_pursued +
could_retreat + accused_weapon + deaths + witness +
physical_evidence + defendant_property + type + victim_race +
victim_gender + victim_age + accused_race + accused_gender +
accused_age + victim_race:accused_race +
victim_gender:accused_gender + victim_race:victim_gender +
accused_race:accused_gender + county + year,
data=df,
model="logit",
cite=FALSE,
robust=TRUE)
require(Zelig)
require(stargazer)
model1<-zelig(conviction ~ victim_initiated + victim_crime + victim_unarmed + defendant_pursued +
could_retreat + accused_weapon + deaths + witness +
physical_evidence + defendant_property + type + victim_race +
victim_gender + victim_age + accused_race + accused_gender +
accused_age + county + year,
data=df,
model="logit",
cite=FALSE,
robust=TRUE)
model1<-zelig(conviction ~ victim_initiated + victim_crime + victim_unarmed + defendant_pursued +
could_retreat + accused_weapon + deaths + witness +
physical_evidence + defendant_property + type + victim_race +
victim_gender + victim_age + accused_race + accused_gender +
accused_age + county + year,
data=df,
model="logit",
cite=FALSE,
robust=TRUE)
setwd("~/Dropbox/gh_projects/florida_syg")
options(digits=2)
df<-read.csv("cleaned_data/convict_model_data.csv", stringsAsFactors=TRUE)
df$conviction<-factor(df$conviction, levels=c("No Conviction", "Conviction"))
df$victim_unarmed<-factor(df$victim_unarmed, levels=c("Victim not clearly unarmed", "Victim clearly unarmed"))
df$victim_crime<-factor(df$victim_crime, levels=c("Victim was not clearly committing a crime", "Victim was committing a crime"))
df$could_retreat<-factor(df$could_retreat, levels=c("Defendant could not clearly have retreated", "Defendant could have retreated"))
df$accused_weapon<-factor(df$accused_weapon, levels=c("Defendant did not clearly have a gun", "Defendant clearly had a gun"))
df$witness<-factor(df$witness, levels=c("No clear witness(es)", "Clear witness(es)"))
df$type<-factor(df$type, levels=c("Non-domestic", "Domestic"))
library(reporttools)
summaryvars<-subset(df, select=c("victim_initiated", "victim_crime", "victim_unarmed", "defendant_pursued",
"could_retreat", "accused_weapon", "deaths", "witness",
"physical_evidence", "defendant_property", "type", "victim_race",
"victim_gender", "victim_age", "accused_race", "accused_gender",
"accused_age", "year"))
summaryvars$deaths<-as.factor(summaryvars$deaths)
levels(summaryvars$deaths)<-c("Victim was not killed", "Victim was killed")
tableContinuous(summaryvars[,sapply(summaryvars, is.numeric)],
stats = c("n", "min", "median", "mean", "max", "s"),
cap="Summary Statistics for Numerical Variables",
lab="Summary Statistics for Numerical Variables",
nams=c("Victim Age", "Defendant Age", "Year"))
tableNominal(summaryvars[,!sapply(summaryvars, is.numeric)],
stats = c("n", "min", "median", "mean", "max", "s"),
cap="Summary Statistics for Categorical Variables",
lab="Summary Statistics for Categorical Variables",
caption.placement = "top",
cumsum=F,
add.to.row = list(list(42),
"\\hline  \\multicolumn{5}{l}{\\textbf{Note: }
The variable county was omitted.} \\\\"))
require(Zelig)
require(stargazer)
# Killing white people is more likely to lead to conviction
model1<-zelig(conviction ~ victim_initiated + victim_crime + victim_unarmed + defendant_pursued +
could_retreat + accused_weapon + deaths + witness +
physical_evidence + defendant_property + type + victim_race +
victim_gender + victim_age + accused_race + accused_gender +
accused_age + county + year,
data=df,
model="logit",
cite=FALSE,
robust=TRUE)
# summary(model1)
model2<-zelig(conviction ~ victim_initiated + victim_crime + victim_unarmed + defendant_pursued +
could_retreat + accused_weapon + deaths + witness +
physical_evidence + defendant_property + type + victim_race +
victim_gender + victim_age + accused_race + accused_gender +
accused_age + victim_race:accused_race +
victim_gender:accused_gender + victim_race:victim_gender +
accused_race:accused_gender + county + year,
data=df,
model="logit",
cite=FALSE,
robust=TRUE)
#model2classif<-table(model2$result$fitted.values>.5, model2$result$y)
#model2correct<-(model2classif[1,1] + model2classif[2,2])
# (model2correct/nrow(df))*100
# summary(model2)
model3<-zelig(conviction ~ victim_initiated + victim_crime + victim_unarmed + defendant_pursued +
could_retreat + accused_weapon + deaths + witness +
physical_evidence + defendant_property + type + victim_race +
victim_gender + victim_age + accused_race + accused_gender +
accused_age +
type:accused_gender +
type:victim_gender + county + year,
data=df,
model="logit",
cite=FALSE,
robust=TRUE)
mainmodel2<-glm(conviction ~ victim_initiated + victim_crime + victim_unarmed + defendant_pursued +
could_retreat + accused_weapon + deaths + witness +
physical_evidence + defendant_property + type +  victim_race +
victim_gender + victim_age + accused_race + accused_gender +
accused_age + victim_race:accused_race +
victim_gender:accused_gender + victim_race:victim_gender +
accused_race:accused_gender + county + year,
data=df,
family=binomial())
mainmodel3<-glm(conviction ~ victim_initiated + victim_crime + victim_unarmed + defendant_pursued +
could_retreat + accused_weapon + deaths + witness +
physical_evidence + defendant_property + type + victim_race +
victim_gender + victim_age + accused_race + accused_gender +
accused_age +
type:accused_gender +
type:victim_gender + county + year,
data=df,
family=binomial())
x.lo <- setx(model2,
year=2012,
deaths=1,
victim_age=17,
accused_age=28,
witness="No clear witness(es)",
type="Non-domestic",
accused_weapon="Defendant clearly had a gun",
victim_unarmed="Victim clearly unarmed",
victim_crime="Victim was not clearly committing a crime",
defendant_pursued="Defendant pursued",
could_retreat="Defendant could have retreated",
defendant_property="Not clearly on property of the defendant",
victim_race="Non-white victim",
victim_gender="Male victim",
accused_race="Non-white defendant",
accused_gender="Male defendant",
victim_initiated="Victim did not clearly initiate")
model.weapon<-zelig(conviction ~ victim_initiated + victim_crime + victim_unarmed + defendant_pursued +
could_retreat + accused_weapon + deaths + witness +
physical_evidence + defendant_property + type + victim_race +
victim_gender + victim_age + accused_race + accused_gender +
accused_age + county + year + deaths:accused_weapon,
data=df,
model="logit",
cite=FALSE,
robust=TRUE)
summary(model.weapon)
model.weapon<-zelig(conviction ~ victim_initiated + victim_crime + victim_unarmed + defendant_pursued +
could_retreat + witness +deaths + accused_weapon +
physical_evidence + defendant_property + type + victim_race +
victim_gender + victim_age + accused_race + accused_gender +
accused_age + county + year + deaths:accused_weapon,
data=df,
model="logit",
cite=FALSE,
robust=TRUE)
summary(model.weapon)
stargazer(model.weapon, header=FALSE, font.size="scriptsize",
title="Logistic Regression for Dependent Variable Conviction",
dep.var.labels.include=FALSE,
style="ajps",
keep=c("victim_initiated", "victim_crime", "victim_unarmed", "defendant_pursued", "could_retreat",
"accused_weapon", "deaths", "witness",
"physical_evidence", "defendant_property", "type", "victim_race", "victim_gender",
"victim_age", "accused_race", "accused_gender", "accused_age", "accused_weapon:deaths"),
covariate.labels=c("Victim Initiated", "Victim Crime", "Victim Unarmed", "Defendant Pursued",
"Defendant Could Retreat", "Defendant Gun", "Deaths", "Witness", "Physical Evidence",
"Defendant's Property", "Domestic", "Victim White", "Victim Male", "Victim Age", "Defendant White",
"Defendant Male", "Defendant Age", "Defendant Gun X Deaths"),
digits=2,
column.sep.width=c("0pt"),
notes=c("County and Year variables included in the models but not displayed. Robust (Huber-White) standard errors in parentheses.")
)
model.weapon<-zelig(conviction ~ victim_initiated + victim_crime + victim_unarmed + defendant_pursued +
could_retreat + witness +deaths + accused_weapon +
physical_evidence + defendant_property + type + victim_race +
victim_gender + victim_age + accused_race + accused_gender +
accused_age + county + year + deaths:accused_weapon,
data=df,
model="logit",
cite=FALSE,
robust=TRUE)
stargazer(model.weapon, header=FALSE, font.size="scriptsize",
title="Logistic Regression for Dependent Variable Conviction",
dep.var.labels.include=FALSE,
style="ajps",
keep=c("victim_initiated", "victim_crime", "victim_unarmed", "defendant_pursued", "could_retreat",
"accused_weapon", "deaths", "witness",
"physical_evidence", "defendant_property", "type", "victim_race", "victim_gender",
"victim_age", "accused_race", "accused_gender", "accused_age", "accused_weapon:deaths"),
covariate.labels=c("Victim Initiated", "Victim Crime", "Victim Unarmed", "Defendant Pursued",
"Defendant Could Retreat", "Defendant Gun", "Deaths", "Witness", "Physical Evidence",
"Defendant's Property", "Domestic", "Victim White", "Victim Male", "Victim Age", "Defendant White",
"Defendant Male", "Defendant Age", "Defendant Gun X Deaths"),
digits=2,
column.sep.width=c("0pt"),
notes=c("County and Year variables included in the models but not displayed. Robust (Huber-White) standard errors in parentheses.")
)
model.weapon<-zelig(conviction ~ victim_initiated + victim_crime + victim_unarmed + defendant_pursued +
could_retreat + witness +deaths + accused_weapon +
physical_evidence + defendant_property + type + victim_race +
victim_gender + victim_age + accused_race + accused_gender +
accused_age + county + year + deaths:accused_weapon,
data=df,
model="logit",
cite=FALSE,
robust=TRUE)
stargazer(model.weapon, header=FALSE, font.size="scriptsize",
title="Logistic Regression for Dependent Variable Conviction",
dep.var.labels.include=FALSE,
style="ajps",
keep=c("victim_initiated", "victim_crime", "victim_unarmed", "defendant_pursued", "could_retreat",
"accused_weapon", "deaths", "witness",
"physical_evidence", "defendant_property", "type", "victim_race", "victim_gender",
"victim_age", "accused_race", "accused_gender", "accused_age", "accused_weapon:deaths"),
covariate.labels=c("Victim Initiated", "Victim Crime", "Victim Unarmed", "Defendant Pursued",
"Defendant Could Retreat", "Witness", "Deaths", "Defendant Gun", "Physical Evidence",
"Defendant's Property", "Domestic", "Victim White", "Victim Male", "Victim Age", "Defendant White",
"Defendant Male", "Defendant Age", "Deaths X Defendant Gun"),
digits=2,
column.sep.width=c("0pt"),
notes=c("County and Year variables included in the models but not displayed. Robust (Huber-White) standard errors in parentheses.")
)
